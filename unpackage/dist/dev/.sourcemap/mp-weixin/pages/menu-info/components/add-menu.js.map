{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?4f51","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?240a","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?0ace","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?a1ad","uni-app:///pages/menu-info/components/add-menu.vue","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?f442","webpack:///C:/Users/Administrator/Desktop/background/system/pages/menu-info/components/add-menu.vue?57f3","webpack:///C:/Users/Administrator/Desktop/background/system/App.vue?7358","webpack:///C:/Users/Administrator/Desktop/background/system/App.vue?01ec","uni-app:///App.vue","webpack:///C:/Users/Administrator/Desktop/background/system/App.vue?62b4","webpack:///C:/Users/Administrator/Desktop/background/system/App.vue?326e"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","Vue","use","uView","config","productionTip","App","mpType","app","store","$mount","data","form","name","price","unit","shopStocks","catgoryIndex","catgoryId","action","showUploadList","uUpload","fileList","fileResName","filiePreviewUrl","reviseItemOldCatgoryId","Revise","onLoad","created","computed","methods","handleRevise","shoping","itemData","handleChange","getCatgoryData","catgoryData","onReady","valChange","console","afterRead","lists","fileListLen","item","status","message","i","result","url","uploadFilePromise","uni","filePath","formData","file","success","resolve","fail","reject","getFiliesPreviewUrl","title","duration","icon","res","resData","deletePic","mask","fromRulesFun","submit","id","description","categoryId","image","oldCatgoryId","flavors","value","isOk","emptyForm","createPage","Page","onLaunch","onShow","onHide"],"mappings":";;;;;;;;;;;;;;;;;;AAAA;AAE2D;AAG3D;AACA;AAGA;AAIA;AAAoC;AAAA;AAZpC;AACAA,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAQ1DC,YAAG,CAACC,GAAG,CAACC,gBAAK,CAAC;;AAEd;;AAIAF,YAAG,CAACG,MAAM,CAACC,aAAa,GAAG,KAAK;AAChCC,YAAG,CAACC,MAAM,GAAG,KAAK;AAElB,IAAMC,GAAG,GAAG,IAAIP,YAAG;EAClBQ,KAAK,EAALA;AAAK,GACFH,YAAG,EACL;AACF,UAAAE,GAAG,EAACE,MAAM,EAAE;AACZ;;AAEA;AAAA,eAYeF,GAAG;AAAA,2B;;;;;;;;;;;;;ACtClB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAqH;AACrH;AAC4D;AACL;AACa;;;AAGpE;AAC6L;AAC7L,gBAAgB,2LAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,mFAAM;AACR,EAAE,4FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,uFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,aAAa,iSAEN;AACP,KAAK;AACL;AACA,aAAa,+TAEN;AACP,KAAK;AACL;AACA,aAAa,uSAEN;AACP,KAAK;AACL;AACA,aAAa,2RAEN;AACP,KAAK;AACL;AACA,aAAa,qUAEN;AACP,KAAK;AACL;AACA,aAAa,6SAEN;AACP,KAAK;AACL;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC1DA;AAAA;AAAA;AAAA;AAAuuB,CAAgB,wrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;ACsC3vB;AAKA;AAIA;AAAA;AAAA;AAAA,eACA;EACA;EACA;EACA;EACAG;IACA;MACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MAAA;MACAC;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;IACA;EACA;;EACAC;IACA;MACA;MACA;IACA;EAEA;EACAC;IACA;IACA;EAEA;EACAC,4BACA,mFAEA;EACAC;IACA;IACAC;MACA;MACA;MACA;MACA;MACAC;QACA;UACAC;UACA;QACA;MACA;MACA;QAEA;UACAhB;UACA;QACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;MACA;IAEA;IACA;IACAiB;MACA;MACA;MACA;MACA;IACA;IACA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC,6DACA;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAGA;IAEAC;MACA;MACA;IACA;IAEA;IACAC;MACAC;IAEA;IAEA;AACA;AACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBACAC;gBACAC;gBACAD;kBACA,2EACAE;oBACAC;oBACAC;kBAAA,GACA;gBACA;gBACA;gBACAC;cAAA;gBAAA;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAC;gBACA;gBACAJ;gBACA;kBACAC;kBACAC;kBACAG;gBACA;gBACAN;cAAA;gBATAI;gBAAA;gBAAA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAWA;IAEA;IACAG;MAAA;MACA;QACAC;UACAF;UACAG;UACAtC;UACAuC;YACAC;UACA;UACAC;YACAC;UACA;UACAC;YACAC;UACA;QACA;MACA;IACA;IAEA;IACAC;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,IACA;kBAAA;kBAAA;gBAAA;gBACAR;kBACAS;kBACAC;kBACAC;gBACA;gBAAA;cAAA;gBAAA;gBAAA,OAGA;cAAA;gBAAAC;gBACAC;gBAAA,MACAA;kBAAA;kBAAA;gBAAA;gBACA;gBAAA,kCACA;cAAA;gBAEAb;kBACAS;kBACAC;kBACAC;gBACA;gBAAA,kCACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAEA;IAEA;IACAG;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAF;gBACA;kBACA;gBACA;kBACAZ;oBACAS;oBACAC;oBACAC;oBACAI;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IACA;IAEA;IACAC;MACA;MACA;MACA;MACA;MACA;MACA;;MAEA;MACA;QACAhB;UACAS;UACAC;UACAC;QACA;QACA;QACA;MACA;;MAEA;MACA;QACA;MACA;QACAX;UACAS;UACAC;UACAC;QACA;QACA;MACA;IAGA;IAEA;IACAM;MAAA;MAAA;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA,KAEA;kBAAA;kBAAA;gBAAA;gBAEA;gBACAxD;kBACAyD;kBACAvD;kBACAwD;kBACAC;kBACAxD;kBACAyD;kBACAC;kBACAC;oBACA5D;oBACA6D;kBACA;gBACA;gBACAC;gBAAA;gBAAA,OAEA;cAAA;gBAAAb;gBACA;gBACA;kBACAA;kBACA;gBACA;gBAAA,MAGAa;kBAAA;kBAAA;gBAAA;gBAAA;gBAAA,OACA;cAAA;gBAAAb;gBACA;kBACAZ;oBACAS;oBACAC;oBACAC;kBACA;kBACA;gBACA;cAAA;gBAAA;gBAAA;cAAA;gBAKA;gBACAc;gBAAA;gBAAA,OACA;cAAA;gBAAAb;gBAAA,MACAa;kBAAA;kBAAA;gBAAA;gBAEAhE;kBACAE;kBACAwD;kBACAC;kBACAxD;kBACAyD;kBACAE;oBACA5D;oBACA6D;kBACA;gBACA;gBAAA;gBAAA,OAEA;cAAA;gBAAAZ;gBACA;kBACAZ;oBACAS;oBACAC;oBACAC;kBACA;kBACA;gBACA;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA;IAMA;IACA;IACAe;MACA;MACA;MACA;MACA;MACA;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACnWA;AAAA;AAAA;AAAA;AAA8iC,CAAgB,y8BAAG,EAAC,C;;;;;;;;;;;ACAlkC;AACA,OAAO,KAAU,EAAE,kBAKd;;;;;;;;;;;;;;;;APNL;AAGA;AACA;AAHA;AACA9E,EAAE,CAACC,iCAAiC,GAAGC,mBAAmB;AAG1D6E,UAAU,CAACC,gBAAI,CAAC,C;;;;;;;;;;;;;AQLhB;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACuD;AACL;AACc;;;AAGhE;AACoL;AACpL,gBAAgB,2LAAU;AAC1B,EAAE,yEAAM;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAqrB,CAAgB,mrBAAG,EAAC,C;;;;;;;;;;;;;;;;;;eCCzsB;EACAC;IACAxC;EAEA;EACAyC;IACAzC;EACA;EACA0C;IACA1C;EACA;AACA;AAAA,2B;;;;;;;;;;;;ACZA;AAAA;AAAA;AAAA;AAAoyC,CAAgB,0tCAAG,EAAC,C;;;;;;;;;;;ACAxzC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/menu-info/components/add-menu.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/menu-info/components/add-menu.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./add-menu.vue?vue&type=template&id=27947988&\"\nvar renderjs\nimport script from \"./add-menu.vue?vue&type=script&lang=js&\"\nexport * from \"./add-menu.vue?vue&type=script&lang=js&\"\nimport style0 from \"./add-menu.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/menu-info/components/add-menu.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-menu.vue?vue&type=template&id=27947988&\"","var components\ntry {\n  components = {\n    uForm: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form/u-form\" */ \"@/uni_modules/uview-ui/components/u-form/u-form.vue\"\n      )\n    },\n    uFormItem: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-form-item/u-form-item\" */ \"@/uni_modules/uview-ui/components/u-form-item/u-form-item.vue\"\n      )\n    },\n    uInput: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-input/u-input\" */ \"@/uni_modules/uview-ui/components/u-input/u-input.vue\"\n      )\n    },\n    uGap: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-gap/u-gap\" */ \"@/uni_modules/uview-ui/components/u-gap/u-gap.vue\"\n      )\n    },\n    uNumberBox: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-number-box/u-number-box\" */ \"@/uni_modules/uview-ui/components/u-number-box/u-number-box.vue\"\n      )\n    },\n    uUpload: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uview-ui/components/u-upload/u-upload\" */ \"@/uni_modules/uview-ui/components/u-upload/u-upload.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-menu.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-menu.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"add-menu-container\">\r\n\t\t<u-form :model=\"form\" ref=\"uForm\">\r\n\t\t\t<u-form-item label=\"商品名称\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<u-input style=\"margin-top: 10px;\" placeholder=\"例:皮皮虾\" v-model=\"form.name\"\r\n\t\t\t\t\t:customStyle=\"{marginTop: '10px'}\" />\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"分类选择\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<picker @change=\"handleChange\" mode=\"selector\" :range=\"category\" range-key=\"name\">\r\n\t\t\t\t\t<view class=\"uni-input\">{{category[form.catgoryIndex].name}}</view>\r\n\t\t\t\t</picker>\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"输入单位\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<u-input :type=\"'text'\" style=\"margin-top: 10px;\" v-model=\"form.unit\" :customStyle=\"{marginTop: '10px'}\"\r\n\t\t\t\t\tplaceholder=\"例:盘\" />\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"商品价格\" prop=\"price\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<u-input type=\"number\" style=\"margin-top: 10px;\" v-model=\"form.price\" :customStyle=\"{marginTop: '10px'}\"\r\n\t\t\t\t\tplaceholder=\"例:20.00\" />\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"商品库存\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<u-gap height=\"10\" bg-color=\"#ffffff\"></u-gap>\r\n\t\t\t\t<u-number-box v-model=\"form.shopStocks\" @change=\"valChange\" :input-width=\"'100%'\"></u-number-box>\r\n\t\t\t</u-form-item>\r\n\t\t\t<u-form-item label=\"商品图片\" label-position=\"top\" label-width=\"200\" label-align=\"center\">\r\n\t\t\t\t<u-gap height=\"10\" bg-color=\"#ffffff\"></u-gap>\r\n\t\t\t\t<u-upload :action=\"action\" :fileList=\"fileList\" :previewFullImage=\"true\" @afterRead=\"afterRead\"\r\n\t\t\t\t\t@delete=\"deletePic\" multiple :maxCount=\"1\" width=\"120\" height=\"120\">\r\n\t\t\t\t</u-upload>\r\n\t\t\t</u-form-item>\r\n\t\t\t<button class=\"btt\" @click=\"submit\">提交</button>\r\n\t\t</u-form>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// import picker from './picker.vue'\r\n\t//导入文件API\r\n\timport {\r\n\t\tdeletePreview,\r\n\t\tfiliesPreview\r\n\t} from \"@/api/fili.js\"\r\n\t//辅助函数\r\n\timport {\r\n\t\tmapState\r\n\t} from \"vuex\"\r\n\t//dispatch 辅助函数\r\n\timport helpDispatch from \"@/utils/helpDispatch.js\"\r\n\texport default {\r\n\t\t// components: {\r\n\t\t// \tpicker\r\n\t\t// },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tform: {\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tprice: '',\r\n\t\t\t\t\tunit: '',\r\n\t\t\t\t\tshopStocks: '',\r\n\t\t\t\t\tcatgoryIndex: 0,\r\n\t\t\t\t\tcatgoryId: 0,\r\n\t\t\t\t},\r\n\t\t\t\taction: 'http://localhost:8001/api/file/upload', //上传地址\r\n\t\t\t\tshowUploadList: false,\r\n\t\t\t\tuUpload: {}, // 组件实例\r\n\t\t\t\tfileList: [], //文件列表\r\n\t\t\t\tfileResName: '', //文件返回的名字\r\n\t\t\t\tfiliePreviewUrl: '', //文件预览地址\r\n\t\t\t\treviseItemOldCatgoryId: '',\r\n\t\t\t\tRevise: false //是否修改商品\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad: function(option) {\r\n\t\t\tif (option) {\r\n\t\t\t\tthis.Revise = true\r\n\t\t\t\tthis.handleRevise(option)\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t//获取分类\t\r\n\t\t\tthis.getCatgoryData()\r\n\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState(\"menu_store\", [\"categoryNameList\", \"category\", \"shopingItem\"]),\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//处理修改商品的事件\r\n\t\t\thandleRevise(option) {\r\n\t\t\t\tthis.itemId = option.shopId\r\n\t\t\t\tconst catgoryId = option.catgoryId\r\n\t\t\t\tconst shoping = this.shopingItem[catgoryId]\r\n\t\t\t\tlet itemData, catgoryIndex;\r\n\t\t\t\tshoping.data.forEach(item => {\r\n\t\t\t\t\tif (item.dishId === option.shopId) {\r\n\t\t\t\t\t\titemData = item\r\n\t\t\t\t\t\treturn 1\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tthis.category.forEach((item, index) => {\r\n\r\n\t\t\t\t\tif (item.id == catgoryId) {\r\n\t\t\t\t\t\tcatgoryIndex = index\r\n\t\t\t\t\t\treturn 1\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t//添加商品数据\r\n\t\t\t\tthis.form.name = itemData.name\r\n\t\t\t\tthis.form.price = itemData.price\r\n\t\t\t\tthis.form.unit = itemData.description\r\n\t\t\t\tthis.form.shopStocks = 999\r\n\t\t\t\tthis.form.catgoryIndex = catgoryIndex\r\n\t\t\t\tthis.form.catgoryId = this.category[catgoryIndex].id\r\n\t\t\t\tthis.reviseItemOldCatgoryId = this.category[catgoryIndex].id\r\n\r\n\t\t\t},\r\n\t\t\t//处理pickr选择\r\n\t\t\thandleChange(e) {\r\n\t\t\t\t//获取分类下标，并且赋值\r\n\t\t\t\tthis.form.catgoryIndex = e.target.value\r\n\t\t\t\t//根据下标，赋值id号\r\n\t\t\t\tthis.form.catgoryId = this.category[e.target.value].id\r\n\t\t\t},\r\n\t\t\t//获取分类\r\n\t\t\tasync getCatgoryData() {\r\n\t\t\t\tconst catgoryData = this.$store.state.menu_store.category.length\r\n\t\t\t\t//没有获取分类 那么触发获取分类函数\r\n\t\t\t\tif (catgoryData == 0) {\r\n\t\t\t\t\tawait helpDispatch(\"menu_store/actionsGetShopingCategoryAll\", 1, \"页面加载失败\")\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\t\t\tonReady() {\r\n\t\t\t\t// 得到整个组件对象，内部图片列表变量为\"lists\"\r\n\t\t\t\tthis.uUpload = this.$refs.uUpload;\r\n\t\t\t},\r\n\r\n\t\t\t//库存的事件\r\n\t\t\tvalChange(e) {\r\n\t\t\t\tconsole.log('当前值为: ' + e.value)\r\n\r\n\t\t\t},\r\n\r\n\t\t\t/**\r\n\t\t\t * 图片\r\n\t\t\t * */\r\n\r\n\t\t\t//读取图片\r\n\t\t\tasync afterRead(event) {\r\n\t\t\t\tlet lists = [].concat(event.file)\r\n\t\t\t\tlet fileListLen = this[`fileList${event.name}`].length\r\n\t\t\t\tlists.map((item) => {\r\n\t\t\t\t\tthis[`fileList${event.name}`].push({\r\n\t\t\t\t\t\t...item,\r\n\t\t\t\t\t\tstatus: 'uploading',\r\n\t\t\t\t\t\tmessage: '上传中'\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\t//循环选中列表 请求处理\r\n\t\t\t\tfor (let i = 0; i < lists.length; i++) {\r\n\t\t\t\t\tconst result = await this.uploadFilePromise(lists[i].url)\r\n\t\t\t\t\tthis.fileResName = result.data\r\n\t\t\t\t\tlet item = this[`fileList${event.name}`][fileListLen]\r\n\t\t\t\t\tthis[`fileList${event.name}`].splice(fileListLen, 1, Object.assign(item, {\r\n\t\t\t\t\t\tstatus: 'success',\r\n\t\t\t\t\t\tmessage: '',\r\n\t\t\t\t\t\turl: result.data\r\n\t\t\t\t\t}))\r\n\t\t\t\t\tfileListLen++\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//上传图片 请求\r\n\t\t\tuploadFilePromise(url) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: 'http://localhost:8001/api/file/upload',\r\n\t\t\t\t\t\tfilePath: url,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tfile: this.fileList\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tresolve(JSON.parse(res.data))\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (res) => {\r\n\t\t\t\t\t\t\treject(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t//获取预览图片的地址\r\n\t\t\tasync getFiliesPreviewUrl() {\r\n\t\t\t\tif (!this.fileResName) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请上传图片',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tconst res = await filiesPreview(this.fileResName)\r\n\t\t\t\tconst resData = JSON.parse(res.data)\r\n\t\t\t\tif (resData.code == 200) {\r\n\t\t\t\t\tthis.filiePreviewUrl = resData.data\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '图片上传失败',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//删除图片\r\n\t\t\tasync deletePic(event) {\r\n\t\t\t\tconst res = await deletePreview(this.fileResName)\r\n\t\t\t\tif (res.data.code == 200) {\r\n\t\t\t\t\tthis[`fileList${event.name}`].splice(event.index, 1)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '删除失败',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\t//检验价格是否合法\r\n\t\t\tfromRulesFun() {\r\n\t\t\t\t//检验规则\r\n\t\t\t\tconst reg = /(^[1-9]\\d*(\\.\\d{1,2})?$)|(^0(\\.\\d{1,2})?$)/;\r\n\t\t\t\tconst priceTarget = reg.test(this.form.price)\r\n\t\t\t\tconst shopName = this.form.name.length > 0\r\n\t\t\t\tconst shopUnit = this.form.unit.length > 0\r\n\t\t\t\tconst shopStocks = this.form.shopStocks > 1\r\n\r\n\t\t\t\t//错误时的处理\r\n\t\t\t\tif (!priceTarget) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '输入正确的价格',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.form.price = \"\"\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//返回是否真\r\n\t\t\t\tif (priceTarget && shopName && shopUnit && shopStocks) {\r\n\t\t\t\t\treturn true\r\n\t\t\t\t} else {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '输入错误，正确输入',\r\n\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\ticon: 'error',\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\r\n\t\t\t//提交表单\r\n\t\t\tasync submit() {\r\n\t\t\t\t//检查是修改，还是添加数据\r\n\t\t\t\tif (this.Revise) {\r\n\t\t\t\t\tlet res;\r\n\t\t\t\t\t//修改数据\r\n\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\tid: this.itemId,\r\n\t\t\t\t\t\tname: this.form.name,\r\n\t\t\t\t\t\tdescription: this.form.unit,\r\n\t\t\t\t\t\tcategoryId: this.form.catgoryId,\r\n\t\t\t\t\t\tprice: this.form.price,\r\n\t\t\t\t\t\timage: this.filiePreviewUrl,\r\n\t\t\t\t\t\toldCatgoryId: this.reviseItemOldCatgoryId,\r\n\t\t\t\t\t\tflavors: [{\r\n\t\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t}]\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconst isOk = this.fromRulesFun()\r\n\r\n\t\t\t\t\tres = await this.getFiliesPreviewUrl()\r\n\t\t\t\t\t// 若没有图片直接通过并且不带图片地址\r\n\t\t\t\t\tif (this.fileList.length == 0) {\r\n\t\t\t\t\t\tres = true\r\n\t\t\t\t\t\tdelete data.image\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tif (isOk && res) {\r\n\t\t\t\t\t\tconst res = await helpDispatch(\"menu_store/actionsgetReviseShopingItem\", data, \"修改失败\")\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '修改成功',\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.emptyForm()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\t//添加数据\r\n\t\t\t\t\tconst isOk = this.fromRulesFun()\r\n\t\t\t\t\tconst res = await this.getFiliesPreviewUrl()\r\n\t\t\t\t\tif (isOk && res) {\r\n\r\n\t\t\t\t\t\tconst data = {\r\n\t\t\t\t\t\t\tname: this.form.name,\r\n\t\t\t\t\t\t\tdescription: this.form.unit,\r\n\t\t\t\t\t\t\tcategoryId: this.form.catgoryId,\r\n\t\t\t\t\t\t\tprice: this.form.price,\r\n\t\t\t\t\t\t\timage: this.filiePreviewUrl,\r\n\t\t\t\t\t\t\tflavors: [{\r\n\t\t\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\t\t\tvalue: \"\"\r\n\t\t\t\t\t\t\t}]\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tconst res = await helpDispatch(\"menu_store/actionsAddShopingItem\", data, \"添加失败\")\r\n\t\t\t\t\t\tif (res) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '添加成功',\r\n\t\t\t\t\t\t\t\tduration: 2000,\r\n\t\t\t\t\t\t\t\ticon: 'success',\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tthis.emptyForm()\r\n\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\t//清空表单\r\n\t\t\temptyForm() {\r\n\t\t\t\tthis.form.name = ''\r\n\t\t\t\tthis.form.price = ''\r\n\t\t\t\tthis.form.unit = ''\r\n\t\t\t\tthis.form.shopStocks = ''\r\n\t\t\t\tthis.form.catgory = 0\r\n\t\t\t\tthis.fileList = []\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.add-menu-container {\r\n\t\tpadding: 10px;\r\n\r\n\r\n\t}\r\n\r\n\t.btt {\r\n\t\tmargin-top: 10px;\r\n\t\twidth: 100%;\r\n\t\tbackground-color: #2b85e4;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t/* 弹窗内的样式 */\r\n\t.pop-card {\r\n\t\twidth: 700rpx;\r\n\t\theight: 200rpx;\r\n\t\tpadding-top: 10px;\r\n\t}\r\n\r\n\r\n\t.pop-input {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tfont-size: 20px;\r\n\r\n\t}\r\n\r\n\t.pop-input input {\r\n\t\twidth: 80%;\r\n\t\tborder-radius: 10px;\r\n\t\theight: 40px;\r\n\t\tborder: 1px solid #2b85e4;\r\n\t\tpadding: 5px;\r\n\t\tmargin-left: 5px;\r\n\t}\r\n\r\n\t.pop-input text {\r\n\t\tmargin-left: 2px;\r\n\t}\r\n\r\n\t.pop-btt {\r\n\t\tmargin-top: 30px;\r\n\t\twidth: 50%;\r\n\t\tbackground-color: #2b85e4;\r\n\t\tcolor: white;\r\n\t}\r\n\r\n\t,\r\n\t.uni-input {\r\n\t\tbackground: rgb(235, 236, 238);\r\n\t\tmargin-top: 5px;\r\n\t\tborder-radius: 5px;\r\n\t\theight: 40px;\r\n\t\ttext-align: center;\r\n\t\tline-height: 40px;\r\n\r\n\t}\r\n\r\n\t.picker {\r\n\t\twidth: 100%;\r\n\t\tbox-sizing: border-box;\r\n\t\tpadding: 50rpx;\r\n\t\ttext-align: center;\r\n\t\tmargin-top: 50rpx;\r\n\t}\r\n</style>","import mod from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-menu.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./add-menu.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1691311789641\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  ","var render, staticRenderFns, recyclableRender, components\nvar renderjs\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"App.vue\"\nexport default component.exports","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=script&lang=js&\"","<script>\nexport default {\n    onLaunch: function () {\n        console.log('App Launch')\n\n    },\n    onShow: function () {\n        console.log('App Show');\n    },\n    onHide: function () {\n        console.log('App Hide');\n    }\n};\n</script>\n\n<style lang=\"scss\">\n/*每个页面公共css */\n@import 'uni_modules/uview-ui/index.scss';\n</style>\r\n","import mod from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../Program Files/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./App.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1691311792993\n      var cssReload = require(\"C:/Program Files/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}