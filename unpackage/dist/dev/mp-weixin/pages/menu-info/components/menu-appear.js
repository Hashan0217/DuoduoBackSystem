(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/menu-info/components/menu-appear"],{327:function(e,t,n){"use strict";n.r(t);var r=n(328),a=n(330);for(var o in a)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return a[e]}))}(o);n(332);var u,i=n(32),c=Object(i["default"])(a["default"],r["render"],r["staticRenderFns"],!1,null,"4ad37954",null,!1,r["components"],u);c.options.__file="pages/menu-info/components/menu-appear.vue",t["default"]=c.exports},328:function(e,t,n){"use strict";n.r(t);var r=n(329);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},329:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return a})),n.d(t,"staticRenderFns",(function(){return u})),n.d(t,"recyclableRender",(function(){return o})),n.d(t,"components",(function(){return r}));try{r={uLoadingIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-loading-icon/u-loading-icon")]).then(n.bind(null,422))},uTabs:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-tabs/u-tabs")]).then(n.bind(null,492))},uniSwipeAction:function(){return n.e("uni_modules/uni-swipe-action/components/uni-swipe-action/uni-swipe-action").then(n.bind(null,454))},uniSwipeActionItem:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uni-swipe-action/components/uni-swipe-action-item/uni-swipe-action-item")]).then(n.bind(null,459))}}}catch(i){if(-1===i.message.indexOf("Cannot find module")||-1===i.message.indexOf(".vue"))throw i;console.error(i.message),console.error("1. 排查组件名称拼写是否正确"),console.error("2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom"),console.error("3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件")}var a=function(){var e=this,t=e.$createElement;e._self._c},o=!1,u=[];a._withStripped=!0},330:function(e,t,n){"use strict";n.r(t);var r=n(331),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},331:function(e,t,n){"use strict";(function(e){var r=n(4);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(n(56)),o=r(n(11)),u=r(n(58)),i=n(160),c=r(n(244));function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l={data:function(){return{current:0,options1:[{text:"编辑",style:{backgroundColor:"#007aff"}},{text:"删除",style:{backgroundColor:"#dd524d"}}],options2:[{text:"下架",style:{backgroundColor:"#dd524d"}},{text:"上架",style:{backgroundColor:"#007aff"}}],pageSize:7,itemHight:120,selectedItemId:"",selectedItem:"",page:1,getShopingFunRun:!1,catgoryId:"",shopItemData:{data:[]}}},created:function(){var t=this;return(0,u.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getCatgoryData();case 2:e.$on("upScrollData",t.handleUpScrollData);case 3:case"end":return n.stop()}}),n)})))()},mounted:function(){return(0,u.default)(a.default.mark((function e(){return a.default.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},beforeDestroy:function(){this.comunicationOff()},computed:d(d({},(0,i.mapState)("menu_store",["category","shopingItem","shopingItemIsLoding","cateGoryIsLoding"])),{},{isEnd:function(){return this.shopItemData.data.length>=this.shopItemData.total}}),watch:{},methods:{itemData:function(){var e=this.category[this.current].id;this.shopingItem[e]?this.shopItemData=this.shopingItem[e]:this.shopItemData={data:[],total:0}},getCatgoryData:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,(0,c.default)("menu_store/actionsGetShopingCategoryAll","页面加载失败");case 2:if(n=t.sent,!n){t.next=7;break}return e.catgoryId=e.category[e.current].id,t.next=7,e.getShopingItem();case 7:case"end":return t.stop()}}),t)})))()},getShopingItem:function(){var e=this;return(0,u.default)(a.default.mark((function t(){var n;return a.default.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.appearMenuNum(e.itemHight);case 2:return n={current:e.page,size:"".concat(e.pageSize),categoryId:e.catgoryId},t.next=5,(0,c.default)("menu_store/actionsGetShopingItem",n,"页面加载失败");case 5:e.itemData();case 6:case"end":return t.stop()}}),t)})))()},handleTabsChange:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.current=e.index,t.catgoryId=t.category[t.current].id,t.page=1,n.next=5,t.getShopingItem();case 5:t.itemData();case 6:case"end":return n.stop()}}),n)})))()},bindClick:function(t){var n=this;return(0,u.default)(a.default.mark((function r(){var o,u,i,s,d;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("编辑"===t.content.text&&(o=n.catgoryId,e.redirectTo({url:"/pages/menu-info/components/add-menu?shopId=".concat(n.selectedItemId,"&catgoryId=").concat(o)})),"删除"!==t.content.text){r.next=7;break}return u={catgoryId:n.catgoryId,itemId:n.selectedItemId},r.next=5,(0,c.default)("menu_store/actionsdeletShopingItem",u,"删除失败");case 5:i=r.sent,i&&n.itemData();case 7:if("上架"!==t.content.text){r.next=16;break}if(console.log(n.selectedItem),1!==n.selectedItem.status){r.next=12;break}return e.showToast({title:"商品已上架",duration:2e3}),r.abrupt("return");case 12:return s={status:1,id:n.selectedItemId,categoryId:n.catgoryId},r.next=15,(0,c.default)("menu_store/actionsgetReviseShopingItemStatues",s,"下架失败");case 15:r.sent;case 16:if("下架"!==t.content.text){r.next=24;break}if(0!==n.selectedItem.status){r.next=20;break}return e.showToast({title:"商品已下架",duration:2e3}),r.abrupt("return");case 20:return d={status:0,id:n.selectedItemId,categoryId:n.catgoryId},r.next=23,(0,c.default)("menu_store/actionsgetReviseShopingItemStatues",d,"下架失败");case 23:r.sent;case 24:case"end":return r.stop()}}),r)})))()},swipeChange:function(e,t){this.selectedItemId=e,this.selectedItem=t},appearMenuNum:function(t){var n=this;return(0,u.default)(a.default.mark((function r(){var o,u,i;return a.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.getSystemInfo();case 2:return o=r.sent,u=o.windowHeight,i=Math.ceil(u/t),n.pageSize=i,r.next=8,n.getDomSizeData("#containerInfo");case 8:r.sent;case 9:case"end":return r.stop()}}),r)})))()},handleUpScrollData:function(e){var t=this;return(0,u.default)(a.default.mark((function n(){var r;return a.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=2*t.itemHight,!(e.data.scrollTop>r&&e.data.deltaY<=0)){n.next=15;break}if(!t.getShopingFunRun){n.next=6;break}return n.abrupt("return");case 6:if(!(t.shopItemData.data.length>=t.shopItemData.total)){n.next=10;break}return n.abrupt("return");case 10:return t.getShopingFunRun=!0,t.page++,n.next=14,t.getShopingItem();case 14:t.getShopingFunRun=!1;case 15:case"end":return n.stop()}}),n)})))()},getDomSizeData:function(t){var n=this;return new Promise((function(r,a){var o=e.createSelectorQuery().in(n),u=o.selectAll(t);u.fields({size:!0},(function(e){r(e)})).exec((function(){a("失败")}))}))},comunicationOff:function(){e.$off("upScrollData",this.handleUpScrollData)}}};t.default=l}).call(this,n(2)["default"])},332:function(e,t,n){"use strict";n.r(t);var r=n(333),a=n.n(r);for(var o in r)["default"].indexOf(o)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(o);t["default"]=a.a},333:function(e,t,n){}}]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/menu-info/components/menu-appear.js.map
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'pages/menu-info/components/menu-appear-create-component',
    {
        'pages/menu-info/components/menu-appear-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('2')['createComponent'](__webpack_require__(327))
        })
    },
    [['pages/menu-info/components/menu-appear-create-component']]
]);
